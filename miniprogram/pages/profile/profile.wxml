<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ - ç‚¹å‡»æ˜¾ç¤ºæ“ä½œèœå• -->
  <view class="user-info-section" bindtap="{{isLoggedIn ? 'showUserActionMenu' : 'showLoginModal'}}">
    <view wx:if="{{!isLoggedIn}}" class="not-logged-in">
      <image class="avatar-placeholder" src="/images/default-avatar.png"></image>
      <view class="login-text">æœªç™»å½• (ç‚¹å‡»ç™»å½•)</view>
    </view>
    <view wx:else class="logged-in-info">
      <!-- ä½¿ç”¨å·²æ³¨å†Œé€‰æ‰‹çš„å¤´åƒ -->
      <image class="user-avatar" src="{{playerInfo.avatarUrl || userInfo.avatarUrl || '/images/default-avatar.png'}}"></image>
      <view class="user-details">
        <text class="username">{{userInfo.nickName}}</text>
        <text class="player-name" wx:if="{{playerInfo}}">é€‰æ‰‹: {{playerInfo.name}}</text>
        <text class="user-id">ID: {{userInfo.userId}}</text>
      </view>
      <!-- æ·»åŠ æŒ‡ç¤ºç®­å¤´è¡¨æ˜å¯ç‚¹å‡» -->
      <view class="arrow-right">
        <text class="action-hint">ç‚¹å‡»ç®¡ç†</text>
        <text class="arrow">></text>
      </view>
    </view>
  </view>
  
  <!-- æ³¨å†Œé€‰æ‰‹åŒºåŸŸ - ä»…åœ¨æœªæ³¨å†Œé€‰æ‰‹æ—¶æ˜¾ç¤º -->
  <view class="action-section" wx:if="{{isLoggedIn && !playerInfo}}">
    <view class="action-button" bindtap="showRegisterPlayerModal">
      <image class="action-icon" src="/images/add-player.png"></image>
      <text class="action-text">æ³¨å†Œé€‰æ‰‹</text>
    </view>
  </view>
  
  <!-- ç§¯åˆ†æ˜¾ç¤ºåŒºåŸŸ - å¯¹ç®¡ç†å‘˜æ˜¾ç¤ºç‰¹æ®Šå†…å®¹ -->
  <view class="score-section" wx:if="{{isLoggedIn}}">
    <view class="score-container" wx:if="{{userInfo.isAdmin}}">
      <view class="score-title">ç³»ç»Ÿç®¡ç†é¢æ¿</view>
      <view class="admin-stats">
        <view class="stat-item">
          <text class="stat-label">é€‰æ‰‹æ€»æ•°</text>
          <text class="stat-value">{{adminStats.totalPlayers || 0}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">æ¯”èµ›æ€»æ•°</text>
          <text class="stat-value">{{adminStats.totalMatches || 0}}</text>
        </view>
      </view>
      <view class="admin-info">ç®¡ç†å‘˜è´¦å·ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™</view>
    </view>
    
    <!-- æ™®é€šç”¨æˆ·çš„ç§¯åˆ†æ˜¾ç¤º - åŸæœ‰ä»£ç  -->
    <view class="score-container" wx:elif="{{playerInfo}}">
      <view class="score-title">å½“å‰æ’ä½åˆ†</view>
      <view class="score-value">{{playerInfo.score || 1000}}</view>
      <view class="player-title" bindtap="showTitleRanges">
        <text class="title-text">{{playerTitle}}</text>
      </view>
      <view class="score-stats">
        <view class="stat-item">
          <text class="stat-label">èƒœåœº</text>
          <text class="stat-value">{{playerInfo.wins || 0}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">è´Ÿåœº</text>
          <text class="stat-value">{{playerInfo.losses || 0}}</text>
        </view>
      </view>
      <!-- æ·»åŠ èƒœç‡æ•°æ® -->
      <view class="score-stats">
        <view class="stat-item">
          <text class="stat-label">æ€»èƒœç‡</text>
          <text class="stat-value">{{playerInfo.winRate || '0%'}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">å•æ‰“èƒœç‡</text>
          <text class="stat-value">{{playerInfo.singlesWinRate || '0%'}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">åŒæ‰“èƒœç‡</text>
          <text class="stat-value">{{playerInfo.doublesWinRate || '0%'}}</text>
        </view>
      </view>
      <!-- æ·»åŠ å•æ‰“å’ŒåŒæ‰“åœºæ¬¡æ•°æ® -->
      <view class="score-stats">
        <view class="stat-item">
          <text class="stat-label">å•æ‰“</text>
          <text class="stat-value">{{playerInfo.singlesWins || 0}}èƒœ{{playerInfo.singlesLosses || 0}}è´Ÿ</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">åŒæ‰“</text>
          <text class="stat-value">{{playerInfo.doublesWins || 0}}èƒœ{{playerInfo.doublesLosses || 0}}è´Ÿ</text>
        </view>
      </view>
      <!-- æ·»åŠ åŒæ‰“ç±»å‹èƒœç‡ - æ ¹æ®æ€§åˆ«æ˜¾ç¤º -->
      <view class="score-stats" wx:if="{{playerInfo.gender === 'male'}}">
        <view class="stat-item">
          <text class="stat-label">ç”·åŒ</text>
          <text class="stat-value">{{playerInfo.maleDoublesWins || 0}}èƒœ{{playerInfo.maleDoublesLosses || 0}}è´Ÿ</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">æ··åŒ</text>
          <text class="stat-value">{{playerInfo.mixedDoublesWins || 0}}èƒœ{{playerInfo.mixedDoublesLosses || 0}}è´Ÿ</text>
        </view>
      </view>
      <view class="score-stats" wx:if="{{playerInfo.gender === 'female'}}">
        <view class="stat-item">
          <text class="stat-label">å¥³åŒ</text>
          <text class="stat-value">{{playerInfo.femaleDoublesWins || 0}}èƒœ{{playerInfo.femaleDoublesLosses || 0}}è´Ÿ</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">æ··åŒ</text>
          <text class="stat-value">{{playerInfo.mixedDoublesWins || 0}}èƒœ{{playerInfo.mixedDoublesLosses || 0}}è´Ÿ</text>
        </view>
      </view>
      <view class="score-description">åˆå§‹æ’ä½åˆ†: 1000</view>
    </view>
  </view>

  <!-- åœ¨ç”¨æˆ·ä¿¡æ¯ä¸‹æ–¹æ·»åŠ ç®¡ç†å‘˜åŠŸèƒ½åŒº -->
  <view class="admin-section" wx:if="{{isLoggedIn && userInfo.isAdmin}}">
    <view class="section-title">ç®¡ç†å‘˜åŠŸèƒ½</view>
    <view class="admin-buttons">
      <view class="admin-btn export-btn" bindtap="exportData">å¯¼å‡ºæ•°æ®</view>
      <view class="admin-btn import-btn" bindtap="importData">å¯¼å…¥æ•°æ®</view>
    </view>
    <view class="admin-buttons">
      <view class="admin-btn create-btn" bindtap="createNewPlayer">åˆ›å»ºé€‰æ‰‹</view>
      <view class="admin-btn manage-btn" bindtap="manageAllPlayers">ç®¡ç†é€‰æ‰‹</view>
    </view>
    <view class="admin-buttons" style="margin-top: 20rpx;">
      <view class="admin-btn history-btn" bindtap="manageMatchHistory">ç®¡ç†å†å²è®°å½•</view>
      <view class="admin-btn merge-btn" bindtap="mergeXiaoFeiPlayer" style="background-color: #ff9500;">åˆå¹¶å°é£</view>
    </view>
  </view>
</view>

<!-- ç”¨æˆ·æ“ä½œèœå• - ç§»é™¤å›¾æ ‡ -->
<view class="action-menu" wx:if="{{showActionMenu}}" bindtap="hideActionMenu">
  <view class="action-menu-mask"></view>
  <view class="action-menu-content" catchtap="stopPropagation">
    <view class="menu-item" bindtap="editPlayerInfo" wx:if="{{playerInfo}}">
      <text>ä¿®æ”¹é€‰æ‰‹ä¿¡æ¯</text>
    </view>
    <view class="menu-item" bindtap="showRegisterPlayerModal" wx:if="{{!playerInfo}}">
      <text>æ³¨å†Œé€‰æ‰‹</text>
    </view>
    <view class="menu-item logout" bindtap="logout">
      <text>é€€å‡ºç™»å½•</text>
    </view>
    <view class="menu-item cancel" bindtap="hideActionMenu">
      <text>å–æ¶ˆ</text>
    </view>
  </view>
</view>

<!-- ç™»å½•/æ³¨å†Œå¼¹çª— -->
<view class="modal" wx:if="{{showLoginModal}}">
  <view class="modal-mask" bindtap="hideLoginModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>{{isRegisterMode ? 'æ³¨å†Œè´¦å·' : 'ç™»å½•è´¦å·'}}</text>
    </view>
    <view class="modal-body">
      <view class="input-group">
        <text class="input-label">ç”¨æˆ·å</text>
        <input type="text" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" value="{{loginForm.username}}" bindinput="onUsernameInput" />
      </view>
      <view class="input-group">
        <text class="input-label">å¯†ç </text>
        <input type="password" placeholder="è¯·è¾“å…¥å¯†ç " value="{{loginForm.password}}" bindinput="onPasswordInput" />
      </view>
      <view class="input-group" wx:if="{{isRegisterMode}}">
        <text class="input-label">ç¡®è®¤å¯†ç </text>
        <input type="password" placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç " value="{{loginForm.confirmPassword}}" bindinput="onConfirmPasswordInput" />
      </view>
      
      <view class="modal-buttons">
        <view class="modal-btn modal-btn-clear" bindtap="hideLoginModal">å–æ¶ˆ</view>
        <view class="modal-btn modal-btn-primary" bindtap="{{isRegisterMode ? 'register' : 'login'}}">
          {{isRegisterMode ? 'æ³¨å†Œ' : 'ç™»å½•'}}
        </view>
      </view>
      
      <view class="switch-mode" bindtap="switchLoginMode">
        {{isRegisterMode ? 'å·²æœ‰è´¦å·ï¼Ÿç‚¹å‡»ç™»å½•' : 'æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»æ³¨å†Œ'}}
      </view>
    </view>
  </view>
</view>

<!-- æ³¨å†Œ/ä¿®æ”¹é€‰æ‰‹å¼¹çª— - æ·»åŠ æ€§åˆ«é€‰æ‹© -->
<view class="modal" wx:if="{{showRegisterPlayerModal}}">
  <view class="modal-mask" bindtap="hideRegisterPlayerModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>{{editingPlayerId ? 'ä¿®æ”¹é€‰æ‰‹ä¿¡æ¯' : 'æ³¨å†Œé€‰æ‰‹'}}</text>
    </view>
    <view class="modal-body">
      <view class="input-group">
        <text class="input-label">é€‰æ‰‹å§“å</text>
        <input type="text" placeholder="è¯·è¾“å…¥é€‰æ‰‹å§“å" value="{{playerForm.name}}" bindinput="onPlayerNameInput" />
      </view>
      
      <view class="input-group">
        <text class="input-label">æ€§åˆ«</text>
        <view class="gender-selection">
          <view class="gender-option {{playerForm.gender === 'male' ? 'selected' : ''}}" bindtap="selectGender" data-gender="male">
            <image class="gender-icon" src="/images/default-avatar.png"></image>
            <text>ç”·</text>
          </view>
          <view class="gender-option {{playerForm.gender === 'female' ? 'selected' : ''}}" bindtap="selectGender" data-gender="female">
            <image class="gender-icon" src="/images/default-avatar-female.png"></image>
            <text>å¥³</text>
          </view>
        </view>
      </view>
      
      <view class="modal-buttons">
        <view class="modal-btn modal-btn-clear" bindtap="hideRegisterPlayerModal">å–æ¶ˆ</view>
        <view class="modal-btn modal-btn-primary" bindtap="savePlayerInfo">ç¡®è®¤</view>
      </view>
    </view>
  </view>
</view>

<!-- å¯¼å‡ºæ•°æ®æ¨¡æ€çª—å£ -->
<view class="modal" wx:if="{{showExportModal}}">
  <view class="modal-mask" bindtap="hideExportModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>æ•°æ®å¯¼å‡º</text>
    </view>
    <view class="modal-body">
      <!-- å¯¼å‡ºé€‰é¡¹ -->
      <view class="export-options">
        <view class="option-group">
          <text class="option-title">é€‰æ‹©å¯¼å‡ºæ•°æ®</text>
          <view class="option-items">
            <view class="option-item {{exportDataTypes.players ? 'selected' : ''}}" bindtap="toggleExportDataType" data-type="players">
              é€‰æ‰‹æ•°æ®
            </view>
            <view class="option-item {{exportDataTypes.matchHistory ? 'selected' : ''}}" bindtap="toggleExportDataType" data-type="matchHistory">
              æ¯”èµ›è®°å½•
            </view>
          </view>
        </view>
      </view>

      <view class="export-tips">
        <text>è¯·å¤åˆ¶ä¸‹æ–¹æ•°æ®å¹¶å®‰å…¨ä¿å­˜ï¼Œç”¨äºå°†æ¥æ•°æ®æ¢å¤</text>
      </view>
      <view class="data-field">
        <textarea value="{{exportedData}}" auto-height maxlength="-1" />
      </view>
      <view class="copy-section">
        <button class="copy-btn" bindtap="copyExportData">å¤åˆ¶æ•°æ®</button>
      </view>
      <view class="modal-buttons">
        <view class="modal-btn modal-btn-primary" bindtap="hideExportModal">å…³é—­</view>
      </view>
    </view>
  </view>
</view>

<!-- å¯¼å…¥æ•°æ®æ¨¡æ€çª—å£ -->
<view class="modal" wx:if="{{showImportModal}}">
  <view class="modal-mask" bindtap="hideImportModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>æ•°æ®å¯¼å…¥</text>
    </view>
    <view class="modal-body">
      <!-- å¯¼å…¥é€‰é¡¹ -->
      <view class="export-options">
        <view class="option-group">
          <text class="option-title">é€‰æ‹©å¯¼å…¥æ•°æ®</text>
          <view class="option-items">
            <view class="option-item {{importDataTypes.players ? 'selected' : ''}}" bindtap="toggleImportDataType" data-type="players">
              é€‰æ‰‹æ•°æ®
            </view>
            <view class="option-item {{importDataTypes.matchHistory ? 'selected' : ''}}" bindtap="toggleImportDataType" data-type="matchHistory">
              æ¯”èµ›è®°å½•
            </view>
          </view>
        </view>
      </view>
      
      <view class="export-tips">
        <text>è¯·ç²˜è´´ä¹‹å‰å¯¼å‡ºçš„æ•°æ®</text>
      </view>
      <view class="data-field">
        <textarea placeholder="ç²˜è´´æ•°æ®åˆ°è¿™é‡Œ" value="{{importText}}" bindinput="onImportTextInput" auto-height maxlength="-1" />
      </view>
      <view class="modal-buttons">
        <view class="modal-btn modal-btn-clear" bindtap="hideImportModal">å–æ¶ˆ</view>
        <view class="modal-btn modal-btn-primary" bindtap="confirmImport">ç¡®è®¤å¯¼å…¥</view>
      </view>
    </view>
  </view>
</view>

<!-- é€‰æ‰‹åˆ—è¡¨ç®¡ç†å¼¹çª— -->
<view class="modal" wx:if="{{showPlayersListModal}}">
  <view class="modal-mask" bindtap="hidePlayersListModal"></view>
  <view class="modal-content players-list-modal">
    <view class="modal-header">
      <text>é€‰æ‰‹ç®¡ç†</text>
    </view>
    <view class="modal-body">
      <view class="players-count">å…± {{playersList.length}} åé€‰æ‰‹</view>
      
      <!-- æœç´¢æ¡† -->
      <view class="search-box">
        <view class="search-input-box">
          <input type="text" placeholder="æœç´¢é€‰æ‰‹å§“å" bindinput="onPlayerSearchInput" value="{{playerSearchText}}"/>
          <view class="search-icon" wx:if="{{!playerSearchText}}">ğŸ”</view>
          <view class="search-clear" wx:if="{{playerSearchText}}" bindtap="clearPlayerSearch">âœ•</view>
        </view>
      </view>
      
      <!-- æ‰¹é‡æ“ä½œåŒºåŸŸ -->
      <view class="batch-operations">
        <view class="batch-toggle" bindtap="toggleBatchSelectPlayers">
          <text wx:if="{{!batchSelectPlayers}}">æ‰¹é‡æ“ä½œ</text>
          <text wx:else>å–æ¶ˆæ‰¹é‡</text>
        </view>
        <view class="batch-select-all" bindtap="toggleSelectAllPlayers" wx:if="{{batchSelectPlayers}}">
          <text>{{allPlayersSelected ? 'å–æ¶ˆå…¨é€‰' : 'å…¨é€‰'}}</text>
        </view>
        <view class="batch-delete-btn" bindtap="batchDeletePlayers" wx:if="{{batchSelectPlayers && selectedPlayerIds.length > 0}}">
          <text>åˆ é™¤é€‰ä¸­({{selectedPlayerIds.length}})</text>
        </view>
      </view>
      
      <scroll-view scroll-y="true" class="players-list">
        <view class="player-item {{selectedPlayerIds.includes(item.id) ? 'selected' : ''}}" wx:for="{{filteredPlayersList}}" wx:key="id" bindtap="{{batchSelectPlayers ? 'togglePlayerSelection' : ''}}" data-id="{{item.id}}">
          <!-- ç§»é™¤å‹¾é€‰æ¡†ï¼Œä½¿ç”¨æ•´è¡Œé«˜äº®æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€ -->
          
          <view class="player-info">
            <image class="player-list-avatar" src="{{item.avatarUrl || '/images/default-avatar.png'}}"></image>
            <view class="player-list-detail">
              <text class="player-list-name">{{item.name}}</text>
              <text class="player-list-score">æ’ä½åˆ†: {{item.score || 1000}}</text>
            </view>
          </view>
          <view class="player-actions">
            <view class="player-action edit" bindtap="editPlayer" data-id="{{item.id}}">ç¼–è¾‘</view>
            <view class="player-action delete" bindtap="deletePlayer" data-id="{{item.id}}" wx:if="{{!item.userId || item.userId !== userInfo.userId}}">åˆ é™¤</view>
          </view>
        </view>
        
        <!-- æ— é€‰æ‰‹æ—¶æ˜¾ç¤ºæç¤º -->
        <view class="no-players" wx:if="{{filteredPlayersList.length === 0}}">
          <text>æš‚æ— é€‰æ‰‹ï¼Œè¯·ç‚¹å‡»"åˆ›å»ºé€‰æ‰‹"æ·»åŠ </text>
        </view>
      </scroll-view>
    </view>
    
    <view class="modal-footer">
      <view class="modal-btn modal-btn-clear" bindtap="hidePlayersListModal">å…³é—­</view>
      <view class="modal-btn modal-btn-primary" bindtap="createNewPlayer">åˆ›å»ºé€‰æ‰‹</view>
    </view>
  </view>
</view>

<!-- å†å²è®°å½•ç®¡ç†å¼¹çª— -->
<view class="modal" wx:if="{{showHistoryListModal}}">
  <view class="modal-mask" bindtap="hideHistoryListModal"></view>
  <view class="modal-content players-list-modal">
    <view class="modal-header">
      <text>å†å²è®°å½•ç®¡ç†</text>
    </view>
    <view class="modal-body">
      <view class="players-count">å…± {{matchHistoryList.length}} æ¡è®°å½•</view>
      
      <!-- æœç´¢æ¡† -->
      <view class="search-box">
        <view class="search-input-box">
          <input type="text" placeholder="æœç´¢å¯¹æˆ˜è®°å½•" bindinput="onHistorySearchInput" value="{{historySearchText}}"/>
          <view class="search-icon" wx:if="{{!historySearchText}}">ğŸ”</view>
          <view class="search-clear" wx:if="{{historySearchText}}" bindtap="clearHistorySearch">âœ•</view>
        </view>
      </view>
      
      <!-- æ‰¹é‡æ“ä½œåŒºåŸŸ -->
      <view class="batch-operations">
        <view class="batch-toggle" bindtap="toggleBatchSelectHistory">
          <text wx:if="{{!batchSelectHistory}}">æ‰¹é‡æ“ä½œ</text>
          <text wx:else>å–æ¶ˆæ‰¹é‡</text>
        </view>
        <view class="batch-select-all" bindtap="toggleSelectAllHistory" wx:if="{{batchSelectHistory}}">
          <text>{{allHistorySelected ? 'å–æ¶ˆå…¨é€‰' : 'å…¨é€‰'}}</text>
        </view>
        <view class="batch-delete-btn" bindtap="batchDeleteHistory" wx:if="{{batchSelectHistory && selectedHistoryIds.length > 0}}">
          <text>åˆ é™¤é€‰ä¸­({{selectedHistoryIds.length}})</text>
        </view>
      </view>
      
      <scroll-view scroll-y="true" class="players-list">
        <view class="history-item {{selectedHistoryIds.includes(item.id) ? 'selected' : ''}}" wx:for="{{filteredHistoryList}}" wx:key="id" bindtap="{{batchSelectHistory ? 'toggleHistorySelection' : ''}}" data-id="{{item.id}}">
          <!-- ç§»é™¤å‹¾é€‰æ¡†ï¼Œä½¿ç”¨æ•´è¡Œé«˜äº®æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€ -->
          
          <view class="history-info">
            <view class="history-date">{{item.displayDate}}</view>
            <view class="history-match">
              <text class="team-name">{{item.leftTeamNames}}</text>
              <text class="match-score">{{item.scoreResult}}</text>
              <text class="team-name">{{item.rightTeamNames}}</text>
            </view>
          </view>
          <view class="history-actions">
            <view class="player-action edit" bindtap="editMatchHistory" data-id="{{item.id}}">ç¼–è¾‘</view>
            <view class="player-action delete" bindtap="deleteMatchHistory" data-id="{{item.id}}">åˆ é™¤</view>
          </view>
        </view>
        
        <!-- æ— è®°å½•æ—¶æ˜¾ç¤ºæç¤º -->
        <view class="no-players" wx:if="{{filteredHistoryList.length === 0}}">
          <text>æš‚æ— å†å²è®°å½•</text>
        </view>
      </scroll-view>
    </view>
    
    <view class="modal-footer">
      <view class="modal-btn modal-btn-primary" bindtap="hideHistoryListModal">å…³é—­</view>
    </view>
  </view>
</view>

<!-- å†å²è®°å½•ç¼–è¾‘å¼¹çª— -->
<view class="modal" wx:if="{{showEditHistoryModal}}">
  <view class="modal-mask" bindtap="hideEditHistoryModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>ç¼–è¾‘å†å²è®°å½•</text>
    </view>
    <view class="modal-body">
      <!-- æ¯”èµ›åŒæ–¹ -->
      <view class="input-group">
        <text class="input-label">å·¦æ–¹é˜Ÿä¼</text>
        <view class="match-teams-preview">
          <text>{{editingHistory.leftTeamNames}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">å³æ–¹é˜Ÿä¼</text>
        <view class="match-teams-preview">
          <text>{{editingHistory.rightTeamNames}}</text>
        </view>
      </view>
      
      <!-- æ¯”åˆ†ç¼–è¾‘ -->
      <view class="input-group">
        <text class="input-label">æ¯”åˆ†</text>
        <view class="score-input-container">
          <input type="number" class="score-input" value="{{editingHistory.leftScore}}" bindinput="onLeftScoreInput" placeholder="å·¦æ–¹åˆ†æ•°" disabled="{{false}}" />
          <text class="score-separator">:</text>
          <input type="number" class="score-input" value="{{editingHistory.rightScore}}" bindinput="onRightScoreInput" placeholder="å³æ–¹åˆ†æ•°" disabled="{{false}}" />
        </view>
      </view>
      
      <view class="modal-buttons">
        <view class="modal-btn modal-btn-clear" bindtap="hideEditHistoryModal">å–æ¶ˆ</view>
        <view class="modal-btn modal-btn-primary" bindtap="confirmEditHistory">ç¡®è®¤</view>
      </view>
    </view>
  </view>
</view>

<!-- ç§°å·æ’ä½åˆ†èŒƒå›´å¼¹çª— -->
<view class="modal" wx:if="{{showTitleRangesModal}}">
  <view class="modal-mask" bindtap="hideTitleRanges"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text>ç§°å·æ’ä½åˆ†èŒƒå›´</text>
    </view>
    <view class="modal-body">
      <view class="title-ranges-list">
        <view class="title-range-item" wx:for="{{titleRanges}}" wx:key="title">
          <text class="title-name {{playerTitle === item.title ? 'current-title' : ''}}">{{item.title}}</text>
          <text class="title-range">{{item.range}}</text>
        </view>
      </view>
    </view>
    <view class="modal-footer">
      <view class="modal-btn modal-btn-primary" bindtap="hideTitleRanges">æˆ‘çŸ¥é“äº†</view>
    </view>
  </view>
</view> 